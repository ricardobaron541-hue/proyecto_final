<!DOCTYPE html>
<!-- Comentario: Indica el tipo de documento HTML5 -->
<html lang="es">
<head>
    <!-- Declara la codificaciÃ³n de caracteres -->
    <meta charset="UTF-8">
    <!-- Hace la pÃ¡gina adaptable a dispositivos mÃ³viles -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- TÃ­tulo que aparece en la pestaÃ±a del navegador -->
    <title>Productos - Dulce ConexiÃ³n</title>
    <!-- Enlace al archivo CSS usando url_for en Flask -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <!-- HEADER -->
    <header class="header">
        <div class="logo">
            <!-- Muestra la imagen del logo cargada desde la carpeta static -->
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
        </div>

        <!-- Barra de navegaciÃ³n -->
        <nav class="nav">
            <a href="/" class="nav-btn">INICIO</a>
            <a href="/producto" class="nav-btn active">PRODUCTO</a>
            <a href="/nosotros" class="nav-btn">NOSOTROS</a>
            <a href="/contacto" class="nav-btn">CONTACTO</a>
        </nav>

        <!-- Ãconos laterales: carrito y usuario -->
        <div class="icons">
            <button class="icon cart" title="Carrito" onclick="window.location.href='/carrito'">ðŸ›’</button>
            <button class="icon user" onclick="window.location.href='/login'">ðŸ‘¤</button>
        </div>
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="productos-main">

        <!-- TÃ­tulo de la secciÃ³n de productos -->
        <h2 class="titulo-productos">NUESTROS PRODUCTOS</h2>

        <!-- Contenedor de tarjetas -->
    <section class="contenedor-cards">

        <!-- Bucle para recorrer cada producto enviado desde Flask -->
        {% for p in productos %}
        <div class="card-producto"
            data-precio="{{ p.Precio }}"
        >
            <!-- Imagen del producto como fondo mediante CSS -->
            <div class="card-imagen"
                style="background-image: url('{{ p.Imagen }}');">
            </div>

            <div class="card-info">
                <!-- Nombre del producto -->
                <h3>{{ p.Nombre_Producto }}</h3>

                <!-- DescripciÃ³n completa del producto -->
                <p class="desc-oculta">
                    {{ p.Descripcion }}
                </p>
            </div>
        </div>
        {% endfor %}

    </section>


    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">

            <!-- InformaciÃ³n del proyecto -->
            <div class="footer-left">
                <h2 class="footer-logo">Dulce ConexiÃ³n</h2>
                <p>Proyecto universitario desarrollado por <strong>Ricardo Baron</strong>.</p>
                <p>UAN â€” ConstrucciÃ³n de Software</p>
                <p>VersiÃ³n 1.0 | 2025</p>
            </div>

            <!-- InformaciÃ³n de contacto -->
            <div class="footer-center">
                <h3>Contacto</h3>
                <p>ðŸ“§ ricardo@uan.edu.co</p>
                <p>ðŸ“± 321 423 9806</p>
            </div>

            <!-- DescripciÃ³n tecnolÃ³gica del proyecto -->
            <div class="footer-right">
                <h3>Sobre el proyecto</h3>
                <p>AplicaciÃ³n web desarrollada con Flask, HTML y CSS.</p>
            </div>

        </div>

        <!-- Parte inferior del footer -->
        <div class="footer-bottom">
            Â© 2025 â€” Proyecto acadÃ©mico | Ricardo Baron
        </div>
    </footer>

<!-- MODAL PARA PRODUCTO -->
<div id="modalProducto" class="modal-oculto">
    <div class="modal-contenido">
        <span class="cerrar-modal">&times;</span>
        <img id="modal-imagen" src="" alt="Imagen Producto">
        <h2 id="modal-titulo"></h2>
        <p id="modal-descripcion"></p>
    </div>
</div>

<!-- SCRIPT: Manejo de tarjetas y envÃ­o de datos al detalle -->
<script>
// Espera que la pÃ¡gina cargue completamente
 document.addEventListener("DOMContentLoaded", () => {

    // Selecciona todas las tarjetas de productos
    const cards = document.querySelectorAll(".card-producto");

    // Recorre cada tarjeta
    cards.forEach(card => {
        card.addEventListener("click", () => {

            // EXTRAER LA IMAGEN:
            let imagen = card.querySelector(".card-imagen").style.backgroundImage;

            // La propiedad backgroundImage devuelve: url("ruta")
            // Esta lÃ­nea quita el texto url("  y  ") dejando solo la ruta
            imagen = imagen.slice(5, -2);

            // Extraer el tÃ­tulo del producto
            let titulo = card.querySelector("h3").innerText;

            // Extraer descripciÃ³n
            let descripcion = card.querySelector("p").innerText;

            // Extraer precio desde el atributo personalizado data-precio
            let precio = card.getAttribute("data-precio");

            // Crear la URL con los datos codificados para evitar errores
            const url = `/producto_detalle?titulo=${encodeURIComponent(titulo)}&descripcion=${encodeURIComponent(descripcion)}&imagen=${encodeURIComponent(imagen)}&precio=${encodeURIComponent(precio)}`;

            // Redirigir al usuario al detalle del producto
            window.location.href = url;
        });
    });
});
</script>
</body>
</html>