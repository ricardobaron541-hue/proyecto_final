<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos - Dulce ConexiÃ³n</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <!-- HEADER -->
    <header class="header">
        <div class="logo">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
        </div>

        <nav class="nav">
            <a href="/" class="nav-btn">INICIO</a>
            <a href="/producto" class="nav-btn active">PRODUCTO</a>
            <a href="/nosotros" class="nav-btn">NOSOTROS</a>
            <a href="/contacto" class="nav-btn">CONTACTO</a>
        </nav>

        <div class="icons">
            <button class="icon cart" title="Carrito" onclick="window.location.href='/carrito'">ðŸ›’</button>
            <button class="icon user" onclick="window.location.href='/login'">ðŸ‘¤</button>
        </div>
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="productos-main">

        <h2 class="titulo-productos">NUESTROS PRODUCTOS</h2>

        <section class="contenedor-cards">

            {% for p in productos %}
            <div class="card-producto" 
                data-precio="{{ p.Precio }}"
            >
                <div class="card-imagen"
                    style="background-image: url('{{ p.Imagen }}');">
                </div>

                <div class="card-info">
                    <h3>{{ p.Nombre_Producto }}</h3>

                    <p class="desc-oculta">
                        {{ p.Descripcion }}
                    </p>
                </div>
            </div>
            {% endfor %}

        </section>


    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">

            <div class="footer-left">
                <h2 class="footer-logo">Dulce ConexiÃ³n</h2>
                <p>Proyecto universitario desarrollado por <strong>Ricardo Baron</strong>.</p>
                <p>UAN â€” ConstrucciÃ³n de Software</p>
                <p>VersiÃ³n 1.0 | 2025</p>
            </div>

            <div class="footer-center">
                <h3>Contacto</h3>
                <p>ðŸ“§ ricardo@uan.edu.co</p>
                <p>ðŸ“± 321 423 9806</p>
            </div>

            <div class="footer-right">
                <h3>Sobre el proyecto</h3>
                <p>AplicaciÃ³n web desarrollada con Flask, HTML y CSS.</p>
            </div>

        </div>

        <div class="footer-bottom">
            Â© 2025 â€” Proyecto acadÃ©mico | Ricardo Baron
        </div>
    </footer>

<!-- MODAL PARA PRODUCTO -->
<div id="modalProducto" class="modal-oculto">
    <div class="modal-contenido">
        <span class="cerrar-modal">&times;</span>
        <img id="modal-imagen" src="" alt="Imagen Producto">
        <h2 id="modal-titulo"></h2>
        <p id="modal-descripcion"></p>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const cards = document.querySelectorAll(".card-producto");

    cards.forEach(card => {
        card.addEventListener("click", () => {

            // Obtener imagen correctamente
            let imagen = card.querySelector(".card-imagen").style.backgroundImage;
            imagen = imagen.slice(5, -2);   // quita url(" ... ")

            let titulo = card.querySelector("h3").innerText;
            let descripcion = card.querySelector("p").innerText;
            let precio = card.getAttribute("data-precio");

            // Enviar a la pÃ¡gina detalle
            const url = `/producto_detalle?titulo=${encodeURIComponent(titulo)}&descripcion=${encodeURIComponent(descripcion)}&imagen=${encodeURIComponent(imagen)}&precio=${encodeURIComponent(precio)}`;

            window.location.href = url;
        });
    });
});
</script>
</body>
</html>
