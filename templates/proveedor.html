<!-- Comentado completamente línea por línea -->
<!DOCTYPE html>
<html>
  <head>
    <!-- Declaración del conjunto de caracteres -->
    <meta charset="UTF-8" />

    <!-- Título que aparece en la pestaña del navegador -->
    <title>Gestión de Proveedores</title>

    <!-- Enlace al archivo CSS principal -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <!-- Título principal centrado -->
    <h2 style="text-align: center; margin-top: 30px; color: #3b2f23">
      Gestión de Proveedores
    </h2>

    <!-- Botón para ir a la página de agregar proveedor -->
    <div style="text-align: center; margin-bottom: 20px">
      <button
        class="btn-agregar"
        onclick="window.location.href='/proveedor/agregar'"
      >
        Agregar Proveedor
      </button>
    </div>

    <!-- Tabla donde se listan los proveedores -->
    <table class="tabla-carrito" style="width: 90%; margin: auto">
      <thead>
        <tr>
          <th>ID</th>
          <th>Proveedor</th>
          <th>Teléfono</th>
          <th>Correo</th>
          <th>Dirección</th>
          <th>Tipo Producto</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <!-- Si no hay proveedores registrados -->
        {% if proveedores|length == 0 %}
        <tr>
          <td colspan="7" style="text-align: center; padding: 20px">
            No hay proveedores registrados.
          </td>
        </tr>

        <!-- Si sí existen proveedores -->
        {% else %} {% for p in proveedores %}
        <tr>
          <!-- Cada columna muestra atributos del proveedor -->
          <td>{{ p.Id_Proveedor }}</td>
          <td>{{ p.Nombre }}</td>
          <td>{{ p.Telefono }}</td>
          <td>{{ p.Correo }}</td>
          <td>{{ p.Direccion }}</td>
          <td>{{ p.Tipo_Producto }}</td>

          <td>
            <!-- BOTÓN EDITAR: Nos lleva a la ruta del proveedor a editar -->
            <button class="btn-editar"
                    onclick="window.location.href='/proveedor/editar/{{ p.Id_Proveedor }}'">
                Editar
            </button>

            <!-- BOTÓN ELIMINAR: Llama a la función JS eliminarProveedor -->
            <button
              class="btn-eliminar"
              onclick="eliminarProveedor('{{ p.Id_Proveedor}}')"
            >
              Eliminar
            </button>
          </td>
        </tr>
        {% endfor %} {% endif %}
      </tbody>
    </table>

    <!-- Botón para volver al menú -->
    <div style="text-align: center; margin: 30px 0">
      <button class="btn-menu" onclick="window.location.href='/bienvenido'">
        Volver
      </button>
    </div>

    <!-- Script con las funciones de edición y eliminación -->
    <script>
      // Función que pide confirmación antes de eliminar un proveedor
      function eliminarProveedor(id) {
        if (confirm("¿Seguro de eliminar este proveedor?")) {
          // Si confirma, redirige a la ruta de eliminación
          window.location.href = "/proveedor/eliminar/" + id;
        }
      }

      /*
        Función para editar proveedor mediante un POST oculto.
        No se usa directamente porque ya existe un botón que redirige,
        pero el código queda disponible si se desea hacer envío oculto.
      */
      function editarProveedor(id, nombre, telefono, correo, direccion, tipo) {
        // Crear un formulario oculto dinámicamente
        const form = document.createElement("form");
        form.method = "POST";
        form.action = "/proveedor/editar/" + id;

        // Agregar campos ocultos con los valores del proveedor
        form.innerHTML = `
        <input type="hidden" name="nombre" value="${nombre}">
        <input type="hidden" name="telefono" value="${telefono}">
        <input type="hidden" name="correo" value="${correo}">
        <input type="hidden" name="direccion" value="${direccion}">
        <input type="hidden" name="tipo" value="${tipo}">
    `;

        // Insertar formulario en el documento y enviarlo
        document.body.appendChild(form);
        form.submit();
      }
    </script>
  </body>
</html>